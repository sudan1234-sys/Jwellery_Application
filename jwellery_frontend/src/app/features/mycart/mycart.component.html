<div class="max-w-5xl mx-auto p-6">
  <h1 class="text-3xl font-semibold text-gray-900 mb-6">Shopping Cart</h1>

  <!-- loading -->
  <div *ngIf="loading" class="py-12 text-center text-gray-500">Loading your cart…</div>

  <!-- cart items -->
  <div *ngIf="!loading && cart && cart.items?.length; else emptyCart" class="space-y-6">
    <div *ngFor="let item of cart.items" class="flex flex-col sm:flex-row items-center justify-between bg-white border border-gray-100 rounded-lg p-4 shadow-sm hover:shadow-md transition">
      
      <!-- Product Image -->
      <div class="flex-shrink-0 w-24 h-24 sm:w-28 sm:h-28 overflow-hidden rounded-lg bg-gray-100">
        <img [src]="item.image" [alt]="item.productName" class="w-full h-full object-cover" />
      </div>

      <!-- Product Info -->
      <div class="flex-1 min-w-0 mt-3 sm:mt-0 sm:ml-4">
        <div class="text-lg font-medium text-gray-900 truncate">{{ item.productName }}</div>
        <div class="text-sm text-gray-600 mt-1">Price: ₹{{ item.price }}</div>
        <div class="text-sm text-gray-600 mt-1">Subtotal: ₹{{ item.price * item.quantity }}</div>
      </div>

      <!-- Controls -->
      <div class="flex items-center gap-4 mt-3 sm:mt-0">
        <select 
          class="border rounded px-2 py-1 text-gray-700"
          [disabled]="updating.has(item.productId)"
          [ngModel]="item.quantity"
          (ngModelChange)="updateQuantity(item, $event)">
          <option *ngFor="let q of quantityOptions()" [value]="q">{{ q }}</option>
        </select>

        <button
          (click)="removeItem(item.productId)"
          [disabled]="updating.has(item.productId)"
          class="text-sm text-red-600 hover:text-red-800 px-3 py-1 rounded">
          Remove
        </button>
      </div>
    </div>

    <!-- Cart summary -->
    <div class="flex justify-end mt-6">
      <div class="w-full sm:w-80 bg-gray-50 border border-gray-100 rounded-lg p-5 shadow-sm">
        <div class="flex justify-between items-center mb-3">
          <div class="text-sm text-gray-600">Subtotal</div>
          <div class="text-lg font-semibold text-gray-900">₹{{ cart.total }}</div>
        </div>
        <button class="w-full mt-2 bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition">
          Proceed to Checkout
        </button>
      </div>
    </div>
  </div>

  <!-- empty cart -->
  <ng-template #emptyCart>
    <div class="text-center py-20">
      <p class="text-lg text-gray-600">Your cart is empty — add some beautiful jewellery!</p>
    </div>
  </ng-template>
</div>
